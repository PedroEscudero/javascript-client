var apisearch=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e),this.id=t,this.type=n}return i(e,[{key:"composedUUID",value:function(){return this.type+"~"+this.id}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=(t.FILTER_IT_DOESNT_MATTER=0,t.FILTER_MUST_ALL=4,t.FILTER_MUST_ALL_WITH_LEVELS=5,t.FILTER_AT_LEAST_ONE=8,t.FILTER_EXCLUDE=16,t.FILTER_PROMOTE=32,t.FILTER_TYPE_FIELD="field",t.FILTER_TYPE_RANGE="range",t.FILTER_TYPE_DATE_RANGE="date_range",t.FILTER_TYPE_GEO="geo",t.FILTER_TYPE_QUERY="query",function(){function e(t,n,i,a){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return r(this,e),this.field=t,this.values=n,this.application_type=i,this.filter_type=a,this.filter_terms=u,this}return i(e,null,[{key:"getFilterPathByField",value:function(e){return["id","type"].indexOf(e)>-1?"uuid."+e:"indexed_metadata."+e}}]),e}());t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(3),o=r(u),s=n(0),l=r(s),f=n(4),c=r(f),_=n(1),d=r(_),h={},E=function(e,t,n){this.repository=e,this.secret=t,this.endpoint=n||"http://127.0.0.1:9002/app.php"},g=function(e,t){return new o.default(this.endpoint,this.secret).query(e).then(function(e){return t(e,null)}).catch(function(e){return t(null,e)})},T=function(e,t){return new l.default(e,t)},y={create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.QUERY_DEFAULT_PAGE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.QUERY_DEFAULT_SIZE;return new c.default({q:e,from:(t-1)*n,page:t,size:n})},createMatchAll:function(){return new c.default({q:"",page:f.QUERY_DEFAULT_PAGE,size:f.QUERY_INFINITE_SIZE})},createLocated:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.QUERY_DEFAULT_PAGE,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f.QUERY_DEFAULT_SIZE;return new c.default({coordinate:e,page:n,size:r,q:t})},createByUUID:function(e){return this.createByUUIDs([e])},createByUUIDs:function(e){var t=e.map(function(e){return e.composedUUID()}),n=new c.default({q:"",page:f.QUERY_DEFAULT_PAGE,size:f.QUERY_INFINITE_SIZE});return n.disableAggregations().disableSuggestions(),n.filters=a({},n.filters,i({},"_id",new d.default("_id",t.filter(function(e,n){return t.indexOf(e)===n}),_.FILTER_AT_LEAST_ONE,_.FILTER_TYPE_FIELD))),n}};e.exports={cache:h,client:E,search:g,createUUID:T,query:y}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e),this.endpoint=t,this.secret=n}return i(e,[{key:"query",value:function(e){e=JSON.stringify(e);var t=this.endpoint+"?key="+this.secret+"&query="+e;return this.fetchData(t)}},{key:"fetchData",value:function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===this.readyState)return 200===this.status?t(JSON.parse(this.responseText)):n("Request error.")},r.open("GET",e,!0),r.send()})}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.QUERY_INFINITE_SIZE=t.QUERY_DEFAULT_SIZE=t.QUERY_DEFAULT_PAGE=t.QUERY_DEFAULT_FROM=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(5),f=r(l),c=n(0),_=r(c),d=n(6),h=r(d),E=n(7),g=r(E),T=n(1),y=r(T),v=n(8),p=n(9),A=r(p),I=t.QUERY_DEFAULT_FROM=0,R=t.QUERY_DEFAULT_PAGE=1,O=t.QUERY_DEFAULT_SIZE=10,F=(t.QUERY_INFINITE_SIZE=1e3,function(){function e(t){return u(this,e),this.q=t.q,this.universe_filters=t.universe_filters||[],this.filters=t.filters||[],this.items_promoted=t.items_promoted||[],this.aggregations=t.aggregations||[],this.page=t.aggregations||R,this.size=t.size||O,this.from=t.from||I,this.aggregations_enabled=t.aggregations_enabled||!0,this.suggestions_enabled=t.suggestions_enabled||!1,this.highlight_enabled=t.highlight_enabled||!1,this.filter_fields=t.filter_fields||[],this.user=t.user||null,this.coordinate=void 0!==t.coordinate?new h.default(t.coordinate.lat,t.coordinate.lon):null,this.sortBy(v.SORT_BY_SCORE),this}return s(e,[{key:"filterBy",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:T.FILTER_AT_LEAST_ONE,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:l.AGGREGATION_SORT_BY_COUNT_DESC;g.default.isArray(n),g.default.isArray(u);var s=y.default.getFilterPathByField(t);return 0!==n.length?this.filters=o({},this.filters,a({},e,new y.default(s,n,r,T.FILTER_TYPE_FIELD))):delete this.filters[t],i&&this.aggregateBy(e,t,r,u),this}},{key:"filterByTypes",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.AGGREGATION_SORT_BY_COUNT_DESC;g.default.isArray(e);var r=y.default.getFilterPathByField("type");return 0!==e.length?this.filters=o({},this.filters,a({},"type",new y.default(r,e,T.FILTER_AT_LEAST_ONE,T.FILTER_TYPE_FIELD))):delete this.filters.type,t&&(this.aggregations=o({},this.aggregations,a({},"type",new f.default("type",r,T.FILTER_AT_LEAST_ONE,T.FILTER_TYPE_FIELD,[],n)))),this}},{key:"filterByIds",value:function(e){g.default.isArray(e);var t=y.default.getFilterPathByField("id");return 0!==e.length?this.filters=o({},this.filters,a({},"id",new y.default(t,e,T.FILTER_AT_LEAST_ONE,T.FILTER_TYPE_FIELD))):delete this.filters.id,this}},{key:"filterByRange",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:T.FILTER_AT_LEAST_ONE,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:T.FILTER_TYPE_RANGE,s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:l.AGGREGATION_SORT_BY_COUNT_DESC;g.default.isArray(n),g.default.isArray(r);var c=y.default.getFilterPathByField(t);return 0!==r.length?this.filters=o({},this.filters,a({},e,new y.default(c,r,i,u))):delete this.filters[e],s&&this.aggregateByRange(e,c,n,i,u,f),this}},{key:"filterByDateRange",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:T.FILTER_AT_LEAST_ONE,a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:l.AGGREGATION_SORT_BY_COUNT_DESC;return this.filterByRange(e,t,n,r,i,T.FILTER_TYPE_DATE_RANGE,a,u)}},{key:"filterUniverseBy",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T.FILTER_AT_LEAST_ONE;g.default.isArray(t);var r=y.default.getFilterPathByField(e);return 0!==t.length?this.universe_filters=o({},this.universe_filters,a({},e,new y.default(r,t,n,T.FILTER_TYPE_FIELD))):delete this.universe_filters[e],this}},{key:"filterUniverseByTypes",value:function(e){g.default.isArray(e);var t=y.default.getFilterPathByField("type");return 0!==e.length?this.universe_filters=o({},this.universe_filters,a({},"type",new y.default(t,e,T.FILTER_AT_LEAST_ONE,T.FILTER_TYPE_FIELD))):delete this.universe_filters.type,this}},{key:"filterUniverseByIds",value:function(e){g.default.isArray(e);var t=y.default.getFilterPathByField("id");return 0!==e.length?this.universe_filters=o({},this.universe_filters,a({},"id",new y.default(t,e,T.FILTER_AT_LEAST_ONE,T.FILTER_TYPE_FIELD))):delete this.universe_filters.id,this}},{key:"filterUniverseByRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T.FILTER_AT_LEAST_ONE,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:T.FILTER_TYPE_RANGE;g.default.isArray(t);var i=y.default.getFilterPathByField(e);return 0!==t.length?this.universe_filters=o({},this.universe_filters,a({},e,new y.default(i,t,n,r))):delete this.universe_filters[e],this}},{key:"filterUniverseByDateRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T.FILTER_AT_LEAST_ONE;return this.filterUniverseByRange(e,t,n,T.FILTER_TYPE_DATE_RANGE)}},{key:"aggregateBy",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.AGGREGATION_SORT_BY_COUNT_DESC,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l.AGGREGATION_NO_LIMIT;return g.default.isDefined(n),g.default.isInteger(n),this.aggregations=o({},this.aggregations,a({},e,new f.default(e,y.default.getFilterPathByField(t),n,T.FILTER_TYPE_FIELD,[],r,i))),this}},{key:"aggregateByRange",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:T.FILTER_TYPE_RANGE,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:l.AGGREGATION_SORT_BY_COUNT_DESC,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:l.AGGREGATION_NO_LIMIT;return g.default.isArray(n),0===n.length?this:(this.aggregations=o({},this.aggregations,a({},e,new f.default(e,y.default.getFilterPathByField(t),r,i,u,s))),this)}},{key:"aggregateByDateRange",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l.AGGREGATION_SORT_BY_COUNT_DESC,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:l.AGGREGATION_NO_LIMIT;return g.default.isArray(n),0===n.length?this:(this.aggregations=o({},this.aggregations,a({},e,new f.default(e,y.default.getFilterPathByField(t),r,T.FILTER_TYPE_DATE_RANGE,i,u))),this)}},{key:"sortBy",value:function(e){var t=this;if(g.default.isDefined(e),void 0!==e._geo_distance){var n;if(this.coordinate instanceof h.default==!1)throw new Error("\n                    In order to be able to sort by coordinates, you need to \n                    create a Query by using apisearch.query.createLocated(...) \n                    instead of apisearch.query.create(...)\n                ");this.sort=a({},"_geo_distance",(n={},a(n,"coordinate",this.coordinate),a(n,"order",e._geo_distance.order),a(n,"unit",e._geo_distance.unit),n))}else Object.keys(e).map(function(n){var r=e[n].order;t.sort=a({},n,a({},"order",r))});return this}},{key:"enableAggregations",value:function(){return this.aggregations_enabled=!0,this}},{key:"disableAggregations",value:function(){return this.aggregations_enabled=!1,this}},{key:"enableSuggestions",value:function(){return this.suggestions_enabled=!0,this}},{key:"disableSuggestions",value:function(){return this.suggestions_enabled=!1,this}},{key:"enableHighlights",value:function(){return this.highlight_enabled=!0,this}},{key:"disableHighlights",value:function(){return this.highlight_enabled=!1,this}},{key:"promoteUUID",value:function(e){if(e instanceof _.default==!1)throw new Error('Excluded item must be type "ItemUUID", "'+e.constructor.name+'" given.');return this.items_promoted=[].concat(i(this.items_promoted),[e]),this}},{key:"promoteUUIDs",value:function(e){var t=this;return[].concat(i(e)).forEach(function(e){return t.promoteUUID(e)}),this}},{key:"excludeUUID",value:function(e){return g.default.isObjectTypeOf(e,_.default),this.excludeUUIDs([e]),this}},{key:"excludeUUIDs",value:function(e){return this.filters=o({},this.filters,a({},"excluded_ids",new y.default("_id",[].concat(i(e)).map(function(e){return e.composedUUID()}),T.FILTER_EXCLUDE,T.FILTER_TYPE_FIELD))),this}},{key:"byUser",value:function(e){return g.default.isObjectTypeOf(e,A.default),this.user=e,this}},{key:"anonymously",value:function(){return this.user=null,null}}]),e}());t.default=F},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=(t.AGGREGATION_SORT_BY_COUNT_ASC=["_count","asc"],t.AGGREGATION_SORT_BY_COUNT_DESC=["_count","desc"]),a=(t.AGGREGATION_SORT_BY_NAME_ASC=["_term","asc"],t.AGGREGATION_SORT_BY_NAME_DESC=["_term","desc"],t.AGGREGATION_NO_LIMIT=0),u=function e(t,n,u,o,s,l,f){r(this,e),this.name=t,this.field=n,this.applicationType=u,this.filterType=o,this.subgroup=s,this.sort=l||i,this.limit=f||a};t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n){if(r(this,e),void 0===t||void 0===t)throw new Error("Not valid coordinates object type given.");this.lat=t,this.lon=n};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,null,[{key:"isDefined",value:function(e){if(void 0===e)throw new TypeError("Method parameter must be defined.")}},{key:"isInteger",value:function(e){if("number"!=typeof e)throw new TypeError('\n                "'+e+'" must be type of Integer, \n                "'+e.constructor.name+'" given.\n            ')}},{key:"isBool",value:function(e){if("boolean"!=typeof e)throw new TypeError('\n                "'+e+'" must be type of Boolean, \n                "'+e.constructor.name+'" given.\n            ')}},{key:"isString",value:function(e){if("string"!=typeof e)throw new TypeError('\n                "'+e+'" must be type of String, \n                "'+e.constructor.name+'" given.\n            ')}},{key:"isArray",value:function(e){if(e instanceof Array==!1)throw new TypeError('\n                "'+e+'" must be type of Array, \n                "'+e.constructor.name+'" given.\n            ')}},{key:"isObjectTypeOf",value:function(e,t){if(e instanceof t!=!0)throw new TypeError('\n                "'+e.constructor.name+'" must be type '+t.name+', \n                "'+e.constructor.name+'" given.\n            ')}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SORT_BY_SCORE={_score:{order:"asc"}},t.SORT_BY_RANDOM={random:{order:"asc"}},t.SORT_BY_ID_ASC={"uuid.id":{order:"asc"}},t.SORT_BY_ID_DESC={"uuid.id":{order:"desc"}},t.SORT_BY_TYPE_ASC={"uuid.type":{order:"asc"}},t.SORT_BY_TYPE_DESC={"uuid.type":{order:"desc"}},t.SORT_BY_LOCATION_KM_ASC={_geo_distance:{order:"asc",unit:"km"}},t.SORT_BY_LOCATION_MI_ASC={_geo_distance:{order:"asc",unit:"mi"}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t){r(this,e),this.id=t};t.default=i}]);