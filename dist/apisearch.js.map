{"version":3,"sources":["webpack:///webpack/bootstrap f3c5e8f5a6bed4322ee7","webpack:///./src/Query/Coordinate.js","webpack:///./src/Geo/AbstractLocationRange.js","webpack:///./src/TypeChecker.js","webpack:///./src/Query/Filter.js","webpack:///./src/Query/ItemUUID.js","webpack:///./src/Query/Query.js","webpack:///./src/Query/Aggregation.js","webpack:///./src/apisearch.js","webpack:///./src/Repository/HttpRepository.js","webpack:///./src/Cache/MemoryCache.js","webpack:///./src/Factory/SecureObjectFactory.js","webpack:///./src/Geo/CoordinateAndDistance.js","webpack:///./src/Geo/Square.js","webpack:///./src/Geo/Polygon.js","webpack:///./src/Factory/QueryFactory.js","webpack:///./src/Query/User.js","webpack:///./src/Query/SortBy.js"],"names":["Coordinate","latitude","longitude","Error","lat","lon","module","exports","AbstractLocationRange","constructor","name","TypeError","toFilterObject","TypeChecker","value","integer","bool","string","array","Array","givenObject","mustBe","FILTER_IT_DOESNT_MATTER","FILTER_MUST_ALL","FILTER_MUST_ALL_WITH_LEVELS","FILTER_AT_LEAST_ONE","FILTER_EXCLUDE","FILTER_PROMOTE","FILTER_TYPE_FIELD","FILTER_TYPE_RANGE","FILTER_TYPE_DATE_RANGE","FILTER_TYPE_GEO","FILTER_TYPE_QUERY","Filter","field","values","applicationType","filterType","filterTerms","application_type","filter_type","filter_terms","indexOf","ItemUUID","id","type","require","User","Aggregation","SORT_BY_SCORE","AGGREGATION_NO_LIMIT","AGGREGATION_SORT_BY_COUNT_DESC","QUERY_DEFAULT_FROM","QUERY_DEFAULT_PAGE","QUERY_DEFAULT_SIZE","QUERY_INFINITE_SIZE","Query","params","q","universe_filters","filters","items_promoted","aggregations","page","size","from","aggregations_enabled","suggestions_enabled","highlight_enabled","filter_fields","user","coordinate","sortBy","filterName","aggregate","aggregationSort","isArray","fieldPath","getFilterPathByField","length","aggregateBy","options","rangeType","aggregateByRange","filterByRange","filterUniverseByRange","locationRange","isObjectTypeOf","fields","map","sort","isDefined","_geo_distance","order","unit","Object","keys","direction","limit","isInteger","itemUUID","uuids","forEach","promoteUUID","uuid","excludeUUIDs","composedUUID","AGGREGATION_SORT_BY_COUNT_ASC","AGGREGATION_SORT_BY_NAME_ASC","AGGREGATION_SORT_BY_NAME_DESC","subgroup","HttpRepository","SecureObjectFactory","QueryFactory","apiKey","endpoint","Apisearch","appId","query","createObject","repository","cache","callback","then","response","catch","error","MemoryCache","secret","encodeURI","JSON","stringify","composedQuery","cachedResponse","get","Promise","resolve","fetchData","self","reject","xhr","XMLHttpRequest","onreadystatechange","readyState","status","parsedResponse","parse","responseText","set","open","send","key","CoordinateAndDistance","Square","Polygon","distance","topLeftCoordinate","bottomRightCoordinate","coordinates","isString","data","queryText","createByUUIDs","ids","disableAggregations","disableSuggestions","filter","item","pos","SORT_BY_RANDOM","SORT_BY_ID_ASC","SORT_BY_ID_DESC","SORT_BY_TYPE_ASC","SORT_BY_TYPE_DESC","SORT_BY_LOCATION_KM_ASC","SORT_BY_LOCATION_MI_ASC"],"mappings":"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","file":"apisearch.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f3c5e8f5a6bed4322ee7","/**\n * Coordinate Type cast\n * @param coordinate\n */\nclass Coordinate {\n    constructor(latitude, longitude) {\n        if (\n            typeof latitude === 'undefined' ||\n            typeof latitude === 'undefined'\n        ) {\n            throw new Error(`Not valid coordinates object type given.`);\n        }\n\n        this.lat = latitude;\n        this.lon = longitude;\n    }\n}\n\nmodule.exports.Coordinate = Coordinate;\n\n\n// WEBPACK FOOTER //\n// ./src/Query/Coordinate.js","/**\n * Abstract Location Range class\n */\nclass AbstractLocationRange {\n    constructor() {\n        if (this.constructor.name === AbstractLocationRange) {\n            throw TypeError(`You can't instantiate an Abstract class`);\n        }\n\n        if (typeof this.toFilterObject === 'undefined') {\n            throw new TypeError(`toFilterObject() method must be implemented.`);\n        }\n    }\n}\n\nmodule.exports.AbstractLocationRange = AbstractLocationRange;\n\n\n// WEBPACK FOOTER //\n// ./src/Geo/AbstractLocationRange.js","/**\n * Typechecking\n */\nclass TypeChecker {\n    static isDefined(value) {\n        if (typeof value === 'undefined') {\n            throw new TypeError(`Method parameter must be defined.`);\n        }\n    }\n\n    static isInteger(integer) {\n        if (typeof integer !== 'number') {\n            throw new TypeError(`\n                \"${integer}\" must be type of Integer, \n                \"${integer.constructor.name}\" given.\n            `);\n        }\n    }\n\n    static isBool(bool) {\n        if (typeof bool !== 'boolean') {\n            throw new TypeError(`\n                \"${bool}\" must be type of Boolean, \n                \"${bool.constructor.name}\" given.\n            `);\n        }\n    }\n\n    static isString(string) {\n        if (typeof string !== 'string') {\n            throw new TypeError(`\n                \"${string}\" must be type of String, \n                \"${string.constructor.name}\" given.\n            `);\n        }\n    }\n\n    static isArray(array) {\n        if (array instanceof Array === false) {\n            throw new TypeError(`\n                \"${array}\" must be type of Array, \n                \"${array.constructor.name}\" given.\n            `);\n        }\n    }\n\n    static isObjectTypeOf(\n        givenObject,\n        mustBe\n    ) {\n        if (givenObject instanceof mustBe !== true) {\n            throw new TypeError(`\n                \"${givenObject.constructor.name}\" must be type ${mustBe.name}, \n                \"${givenObject.constructor.name}\" given.\n            `);\n        }\n    }\n}\n\nmodule.exports.TypeChecker = TypeChecker;\n\n\n// WEBPACK FOOTER //\n// ./src/TypeChecker.js","/**\n * filter constants\n */\nconst FILTER_IT_DOESNT_MATTER = 0;\nconst FILTER_MUST_ALL = 4;\nconst FILTER_MUST_ALL_WITH_LEVELS = 5;\nconst FILTER_AT_LEAST_ONE = 8;\nconst FILTER_EXCLUDE = 16;\nconst FILTER_PROMOTE = 32;\nconst FILTER_TYPE_FIELD = 'field';\nconst FILTER_TYPE_RANGE = 'range';\nconst FILTER_TYPE_DATE_RANGE = 'date_range';\nconst FILTER_TYPE_GEO = 'geo';\nconst FILTER_TYPE_QUERY = 'query';\n\n/**\n * Filter class\n */\nclass Filter {\n    constructor(\n        field,\n        values,\n        applicationType,\n        filterType,\n        filterTerms = []\n    ) {\n        this.field = field;\n        this.values = values;\n        this.application_type = applicationType;\n        this.filter_type = filterType;\n        this.filter_terms = filterTerms;\n\n        return this;\n    }\n\n    static getFilterPathByField(field) {\n        return (['id', 'type'].indexOf(field) > -1)\n            ? `uuid.${field}`\n            : `indexed_metadata.${field}`\n        ;\n    }\n}\n\nmodule.exports = {\n    FILTER_IT_DOESNT_MATTER,\n    FILTER_MUST_ALL,\n    FILTER_MUST_ALL_WITH_LEVELS,\n    FILTER_AT_LEAST_ONE,\n    FILTER_EXCLUDE,\n    FILTER_PROMOTE,\n    FILTER_TYPE_FIELD,\n    FILTER_TYPE_RANGE,\n    FILTER_TYPE_DATE_RANGE,\n    FILTER_TYPE_GEO,\n    FILTER_TYPE_QUERY\n};\nmodule.exports.Filter = Filter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Query/Filter.js","/**\n * ItemUUID class\n */\nclass ItemUUID {\n    constructor(id, type) {\n        this.id = id;\n        this.type = type;\n    }\n\n    composedUUID() {\n        return `${this.type}~${this.id}`;\n    }\n}\n\nmodule.exports.ItemUUID = ItemUUID;\n\n\n// WEBPACK FOOTER //\n// ./src/Query/ItemUUID.js","const ItemUUID = require(\"./ItemUUID\").ItemUUID;\nconst Coordinate = require(\"./Coordinate\").Coordinate;\nconst TypeChecker = require(\"../TypeChecker\").TypeChecker;\nconst User = require(\"./User\").User;\nconst Aggregation = require(\"./Aggregation\").Aggregation;\nconst Filter = require('./Filter').Filter;\nconst AbstractLocationRange = require(\"../Geo/AbstractLocationRange\").AbstractLocationRange;\n\nconst SORT_BY_SCORE = require(\"./SortBy\");\nconst {\n    FILTER_AT_LEAST_ONE,\n    FILTER_EXCLUDE,\n    FILTER_TYPE_DATE_RANGE,\n    FILTER_TYPE_FIELD,\n    FILTER_TYPE_GEO,\n    FILTER_TYPE_RANGE\n} = require(\"./Filter\");\nconst {\n    AGGREGATION_NO_LIMIT,\n    AGGREGATION_SORT_BY_COUNT_DESC\n} = require(\"./Aggregation\");\n\n/**\n * Query constants\n */\nconst QUERY_DEFAULT_FROM = 0;\nconst QUERY_DEFAULT_PAGE = 1;\nconst QUERY_DEFAULT_SIZE = 10;\nconst QUERY_INFINITE_SIZE = 1000;\n\n/**\n * Query class\n */\nclass Query {\n    constructor(params) {\n        this.q = params.q;\n        this.universe_filters = params.universe_filters || [];\n        this.filters = params.filters || [];\n        this.items_promoted = params.items_promoted || [];\n        this.aggregations = params.aggregations || [];\n        this.page = params.aggregations || QUERY_DEFAULT_PAGE;\n        this.size = params.size || QUERY_DEFAULT_SIZE;\n        this.from = params.from || QUERY_DEFAULT_FROM;\n        this.aggregations_enabled = params.aggregations_enabled || true;\n        this.suggestions_enabled = params.suggestions_enabled || false;\n        this.highlight_enabled = params.highlight_enabled || false;\n        this.filter_fields = params.filter_fields || [];\n        this.user = params.user || null;\n        this.coordinate = (typeof params.coordinate !== 'undefined')\n            ? new Coordinate(\n                params.coordinate.lat,\n                params.coordinate.lon\n            ) : null\n        ;\n        this.sortBy(SORT_BY_SCORE);\n\n        return this;\n    }\n\n    filterBy(\n        filterName,\n        field,\n        values,\n        applicationType = FILTER_AT_LEAST_ONE,\n        aggregate = true,\n        aggregationSort = AGGREGATION_SORT_BY_COUNT_DESC\n    ) {\n        TypeChecker.isArray(values);\n        TypeChecker.isArray(aggregationSort);\n\n        let fieldPath = Filter.getFilterPathByField(field);\n        if (values.length !== 0) {\n            this.filters = {\n                ...this.filters,\n                [filterName]: new Filter(\n                    fieldPath,\n                    values,\n                    applicationType,\n                    FILTER_TYPE_FIELD\n                )\n            }\n        } else {\n            delete this.filters[field]\n        }\n\n        if (aggregate) {\n            this.aggregateBy(\n                filterName,\n                field,\n                applicationType,\n                aggregationSort\n            )\n        }\n\n        return this;\n    }\n\n    filterByTypes(\n        values,\n        aggregate = true,\n        aggregationSort = AGGREGATION_SORT_BY_COUNT_DESC\n    ) {\n        TypeChecker.isArray(values);\n\n        let fieldPath = Filter.getFilterPathByField('type');\n        if (values.length !== 0) {\n            this.filters = {\n                ...this.filters,\n                ['type']: new Filter(\n                    fieldPath,\n                    values,\n                    FILTER_AT_LEAST_ONE,\n                    FILTER_TYPE_FIELD\n                )\n            }\n        } else {\n            delete this.filters['type']\n        }\n\n        if (aggregate) {\n            this.aggregations = {\n                ...this.aggregations,\n                ['type']: new Aggregation(\n                    'type',\n                    fieldPath,\n                    FILTER_AT_LEAST_ONE,\n                    FILTER_TYPE_FIELD,\n                    [],\n                    aggregationSort\n                )\n            }\n        }\n\n        return this;\n    }\n\n    filterByIds(values) {\n        TypeChecker.isArray(values);\n\n        let fieldPath = Filter.getFilterPathByField('id');\n        if (values.length !== 0) {\n            this.filters = {\n                ...this.filters,\n                ['id']: new Filter(\n                    fieldPath,\n                    values,\n                    FILTER_AT_LEAST_ONE,\n                    FILTER_TYPE_FIELD\n                )\n            }\n        } else {\n            delete this.filters['id']\n        }\n\n        return this;\n    }\n\n    filterByRange(\n        filterName,\n        field,\n        options,\n        values,\n        applicationType = FILTER_AT_LEAST_ONE,\n        rangeType = FILTER_TYPE_RANGE,\n        aggregate = true,\n        aggregationSort = AGGREGATION_SORT_BY_COUNT_DESC\n    ) {\n        TypeChecker.isArray(options);\n        TypeChecker.isArray(values);\n\n        let fieldPath = Filter.getFilterPathByField(field);\n        if (values.length !== 0) {\n            this.filters = {\n                ...this.filters,\n                [filterName]: new Filter(\n                    fieldPath,\n                    values,\n                    applicationType,\n                    rangeType\n                )\n            }\n        } else {\n            delete this.filters[filterName]\n        }\n\n        if (aggregate) {\n            this.aggregateByRange(\n                filterName,\n                fieldPath,\n                options,\n                applicationType,\n                rangeType,\n                aggregationSort\n            )\n        }\n\n        return this;\n    }\n\n    filterByDateRange(\n        filterName,\n        field,\n        options,\n        values,\n        applicationType = FILTER_AT_LEAST_ONE,\n        aggregate = true,\n        aggregationSort = AGGREGATION_SORT_BY_COUNT_DESC\n    ) {\n        return this.filterByRange(\n            filterName,\n            field,\n            options,\n            values,\n            applicationType,\n            FILTER_TYPE_DATE_RANGE,\n            aggregate,\n            aggregationSort\n        );\n    }\n\n    filterUniverseBy(\n        field,\n        values,\n        applicationType = FILTER_AT_LEAST_ONE\n    ) {\n        TypeChecker.isArray(values);\n\n        let fieldPath = Filter.getFilterPathByField(field);\n        if (values.length !== 0) {\n            this.universe_filters = {\n                ...this.universe_filters,\n                [field]: new Filter(\n                    fieldPath,\n                    values,\n                    applicationType,\n                    FILTER_TYPE_FIELD\n                )\n            }\n        } else {\n            delete this.universe_filters[field]\n        }\n\n        return this;\n    }\n\n    filterUniverseByTypes(values) {\n        TypeChecker.isArray(values);\n\n        let fieldPath = Filter.getFilterPathByField('type');\n        if (values.length !== 0) {\n            this.universe_filters = {\n                ...this.universe_filters,\n                ['type']: new Filter(\n                    fieldPath,\n                    values,\n                    FILTER_AT_LEAST_ONE,\n                    FILTER_TYPE_FIELD\n                )\n            }\n        } else {\n            delete this.universe_filters['type']\n        }\n\n        return this;\n    }\n\n    filterUniverseByIds(values) {\n        TypeChecker.isArray(values);\n\n        let fieldPath = Filter.getFilterPathByField('id');\n        if (values.length !== 0) {\n            this.universe_filters = {\n                ...this.universe_filters,\n                ['id']: new Filter(\n                    fieldPath,\n                    values,\n                    FILTER_AT_LEAST_ONE,\n                    FILTER_TYPE_FIELD\n                )\n            }\n        } else {\n            delete this.universe_filters['id']\n        }\n\n        return this;\n    }\n\n    filterUniverseByRange(\n        field,\n        values,\n        applicationType = FILTER_AT_LEAST_ONE,\n        rangeType = FILTER_TYPE_RANGE\n    ) {\n        TypeChecker.isArray(values);\n\n        let fieldPath = Filter.getFilterPathByField(field);\n        if (values.length !== 0) {\n            this.universe_filters = {\n                ...this.universe_filters,\n                [field]: new Filter(\n                    fieldPath,\n                    values,\n                    applicationType,\n                    rangeType\n                )\n            }\n        } else {\n            delete this.universe_filters[field]\n        }\n\n        return this;\n    }\n\n    filterUniverseByDateRange(\n        field,\n        values,\n        applicationType = FILTER_AT_LEAST_ONE\n    ) {\n        return this.filterUniverseByRange(\n            field,\n            values,\n            applicationType,\n            FILTER_TYPE_DATE_RANGE\n        );\n    }\n\n    filterUniverseByLocation(locationRange) {\n        TypeChecker.isObjectTypeOf(locationRange, AbstractLocationRange);\n\n        this.universe_filters = {\n            ...this.universe_filters,\n            ['coordinate']: new Filter(\n                'coordinate',\n                locationRange.toFilterObject(),\n                FILTER_AT_LEAST_ONE,\n                FILTER_TYPE_GEO\n            )\n        };\n\n        return this;\n    }\n\n    setFilterFields(fields) {\n        TypeChecker.isArray(fields);\n\n        if (fields.length === 0) {\n            this.filter_fields = [...fields];\n\n            return this;\n        }\n\n        fields.map(field => {\n            this.filter_fields = [\n                ...this.filter_fields,\n                field\n            ]\n        });\n\n        return this;\n    }\n\n    sortBy(sort) {\n        TypeChecker.isDefined(sort);\n\n        if (typeof sort['_geo_distance'] !== 'undefined') {\n            if (this.coordinate instanceof Coordinate === false) {\n                throw new Error(`\n                    In order to be able to sort by coordinates, you need to \n                    create a Query by using apisearch.query.createLocated(...) \n                    instead of apisearch.query.create(...)\n                `);\n            }\n            this.sort = {\n                ['_geo_distance']: {\n                    ['coordinate']: this.coordinate,\n                    ['order']: sort._geo_distance.order,\n                    ['unit']: sort._geo_distance.unit\n                }\n            };\n        } else {\n            Object.keys(sort).map(field => {\n                let direction = sort[field].order;\n                this.sort = {\n                    [field]: {\n                        ['order']: direction\n                    }\n                };\n            });\n        }\n\n        return this;\n    }\n\n    aggregateBy(\n        filterName,\n        field,\n        applicationType,\n        aggregationSort = AGGREGATION_SORT_BY_COUNT_DESC,\n        limit = AGGREGATION_NO_LIMIT\n    ) {\n        TypeChecker.isDefined(applicationType);\n        TypeChecker.isInteger(applicationType);\n\n        this.aggregations = {\n            ...this.aggregations,\n            [filterName]: new Aggregation(\n                filterName,\n                Filter.getFilterPathByField(field),\n                applicationType,\n                FILTER_TYPE_FIELD,\n                [],\n                aggregationSort,\n                limit\n            )\n        };\n\n        return this;\n    }\n\n    aggregateByRange(\n        filterName,\n        field,\n        options,\n        applicationType,\n        rangeType = FILTER_TYPE_RANGE,\n        aggregationSort = AGGREGATION_SORT_BY_COUNT_DESC,\n        limit = AGGREGATION_NO_LIMIT\n    ) {\n        TypeChecker.isArray(options);\n\n        if (options.length === 0) {\n            return this;\n        }\n\n        this.aggregations = {\n            ...this.aggregations,\n            [filterName]: new Aggregation(\n                filterName,\n                Filter.getFilterPathByField(field),\n                applicationType,\n                rangeType,\n                aggregationSort,\n                limit\n            )\n        };\n\n        return this;\n    }\n\n    aggregateByDateRange(\n        filterName,\n        field,\n        options,\n        applicationType,\n        aggregationSort = AGGREGATION_SORT_BY_COUNT_DESC,\n        limit = AGGREGATION_NO_LIMIT\n    ) {\n        TypeChecker.isArray(options);\n\n        if (options.length === 0) {\n            return this;\n        }\n\n        this.aggregations = {\n            ...this.aggregations,\n            [filterName]: new Aggregation(\n                filterName,\n                Filter.getFilterPathByField(field),\n                applicationType,\n                FILTER_TYPE_DATE_RANGE,\n                aggregationSort,\n                limit\n            )\n        };\n\n        return this;\n    }\n\n    enableAggregations() {\n        this.aggregations_enabled = true;\n        return this;\n    }\n\n    disableAggregations() {\n        this.aggregations_enabled = false;\n        return this;\n    }\n\n    enableSuggestions() {\n        this.suggestions_enabled = true;\n        return this;\n    }\n\n    disableSuggestions() {\n        this.suggestions_enabled = false;\n        return this;\n    }\n\n    enableHighlights() {\n        this.highlight_enabled = true;\n        return this;\n    }\n\n    disableHighlights() {\n        this.highlight_enabled = false;\n        return this;\n    }\n\n    promoteUUID(itemUUID) {\n        if (itemUUID instanceof ItemUUID === false) {\n            throw new Error(`Excluded item must be type \"ItemUUID\", \"${itemUUID.constructor.name}\" given.`);\n        }\n        this.items_promoted = [\n            ...this.items_promoted,\n            itemUUID\n        ];\n\n        return this;\n    }\n\n    promoteUUIDs(...uuids) {\n        uuids.forEach(uuid => this.promoteUUID(uuid));\n\n        return this;\n    }\n\n    excludeUUID(itemUUID) {\n        TypeChecker.isObjectTypeOf(itemUUID, ItemUUID);\n        this.excludeUUIDs(itemUUID);\n\n        return this;\n    }\n\n    excludeUUIDs(...uuids) {\n        this.filters = {\n            ...this.filters,\n            ['excluded_ids']: new Filter(\n                '_id',\n                uuids.map(uuid => uuid.composedUUID()),\n                FILTER_EXCLUDE,\n                FILTER_TYPE_FIELD\n            )\n        };\n\n        return this;\n    }\n\n    byUser(user) {\n        TypeChecker.isObjectTypeOf(user, User);\n        this.user = user;\n\n        return this;\n    }\n\n    anonymously() {\n        this.user = null;\n\n        return null;\n    }\n}\n\nmodule.exports = {\n    QUERY_DEFAULT_FROM,\n    QUERY_DEFAULT_PAGE,\n    QUERY_DEFAULT_SIZE,\n    QUERY_INFINITE_SIZE\n};\nmodule.exports.Query = Query;\n\n\n// WEBPACK FOOTER //\n// ./src/Query/Query.js","/**\n * Aggregation constants\n */\nconst AGGREGATION_SORT_BY_COUNT_ASC = ['_count', 'asc'];\nconst AGGREGATION_SORT_BY_COUNT_DESC = ['_count', 'desc'];\nconst AGGREGATION_SORT_BY_NAME_ASC = ['_term', 'asc'];\nconst AGGREGATION_SORT_BY_NAME_DESC = ['_term', 'desc'];\nconst AGGREGATION_NO_LIMIT = 0;\n\n/**\n * Aggregation class\n */\nclass Aggregation {\n    constructor(\n        name,\n        field,\n        applicationType,\n        filterType,\n        subgroup,\n        sort,\n        limit\n    ) {\n        this.name = name;\n        this.field = field;\n        this.applicationType = applicationType;\n        this.filterType = filterType;\n        this.subgroup = subgroup;\n        this.sort = sort || AGGREGATION_SORT_BY_COUNT_DESC;\n        this.limit = limit || AGGREGATION_NO_LIMIT;\n    }\n}\n\nmodule.exports = {\n    AGGREGATION_SORT_BY_COUNT_ASC,\n    AGGREGATION_SORT_BY_COUNT_DESC,\n    AGGREGATION_SORT_BY_NAME_ASC,\n    AGGREGATION_SORT_BY_NAME_DESC,\n    AGGREGATION_NO_LIMIT\n};\nmodule.exports.Aggregation = Aggregation;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Query/Aggregation.js","const HttpRepository = require(\"./Repository/HttpRepository\");\nconst SecureObjectFactory = require(\"./Factory/SecureObjectFactory\").SecureObjectFactory;\nconst QueryFactory = require(\"./Factory/QueryFactory\").QueryFactory;\n\n/**\n * Entry point for the Apisearch client\n *\n * @param apiKey\n * @param endpoint\n *\n * @returns {Apisearch}\n */\nmodule.exports = function(apiKey, endpoint) {\n    if (typeof apiKey === 'undefined') {\n       throw new TypeError(`ApiKey parameter must be defined.`)\n    }\n\n    return new Apisearch(\n        'apisearch-app-id',\n        apiKey,\n        endpoint\n    );\n};\n\n/**\n * Apisearch class\n */\nclass Apisearch {\n    constructor(appId, apiKey, options = {}) {\n        this.appId = appId;\n        this.apiKey = apiKey;\n        this.endpoint = options.endpoint || 'http://127.0.0.1:9002/app.php';\n\n        this.query = QueryFactory;\n        this.createObject = SecureObjectFactory;\n\n        this.repository = new HttpRepository(\n            this.endpoint,\n            this.apiKey,\n            options.cache || true\n        );\n    }\n\n    search(query, callback) {\n        return this.repository\n            .query(query)\n            .then(\n                response => callback(response, null)\n            )\n            .catch(\n                error => callback(null, error)\n            )\n        ;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/apisearch.js","/**\n * Repository class\n */\nconst MemoryCache = require(\"../Cache/MemoryCache\");\n\nclass HttpRepository {\n    /**\n     * Constructor\n     * @param endpoint\n     * @param secret\n     * @param cache\n     */\n    constructor(endpoint, secret, cache) {\n        this.endpoint = endpoint;\n        this.secret = secret;\n        this.cache = cache ? new MemoryCache() : null;\n    }\n\n    /**\n     * Make query against the server\n     * @param query\n     * @returns {Promise}\n     */\n    query(query) {\n        query = encodeURI(\n            JSON.stringify(query)\n        );\n        let composedQuery = `${this.endpoint}?key=${this.secret}&query=${query}`;\n\n        // check if query exists in cache store\n        // return promise with the cached value if key exists\n        // if not exists, fetch data with XMLHttpRequest\n        if (this.cache !== null) {\n            let cachedResponse = this.cache.get(composedQuery);\n            if (cachedResponse) {\n                return new Promise(resolve => resolve(cachedResponse));\n            }\n        }\n\n        return this.fetchData(composedQuery);\n    }\n\n    fetchData(composedQuery) {\n        let self = this;\n        return new Promise((resolve, reject) => {\n                let xhr = new XMLHttpRequest();\n                xhr.onreadystatechange = function () {\n                    if (this.readyState === 4) {\n                        if (this.status === 200) {\n                            let parsedResponse = JSON.parse(this.responseText);\n\n                            // check if cache is enabled\n                            // set the composedQuery as a cache key\n                            // and the valid response as a cache value\n                            if (this.cache !== null) {\n                                self.cache.set(\n                                    composedQuery,\n                                    parsedResponse\n                                );\n                            }\n\n                            return resolve(parsedResponse);\n                        } else {\n                            return reject(`Request error.`)\n                        }\n                    }\n                };\n\n                xhr.open(\"GET\", composedQuery, true);\n                xhr.send();\n            }\n        );\n    }\n}\n\nmodule.exports = HttpRepository;\n\n\n// WEBPACK FOOTER //\n// ./src/Repository/HttpRepository.js","/**\n * Cache class\n */\nclass MemoryCache {\n    constructor() {\n        this.cache = {};\n        this.size = 0;\n\n        return this;\n    }\n\n    set(key, value) {\n        this.cache = {\n            ...this.cache,\n            [key]: value\n        };\n        this.size = this.size + 1;\n\n        return this;\n    }\n\n    get(key) {\n        return this.cache[key];\n    }\n\n    clear() {\n        this.cache = {};\n        this.size = 0;\n    }\n}\n\nmodule.exports = MemoryCache;\n\n\n// WEBPACK FOOTER //\n// ./src/Cache/MemoryCache.js","const ItemUUID = require(\"../Query/ItemUUID\").ItemUUID;\nconst Coordinate = require(\"../Query/Coordinate\").Coordinate;\nconst CoordinateAndDistance = require(\"../Geo/CoordinateAndDistance\").CoordinateAndDistance;\nconst Square = require(\"../Geo/Square\").Square;\nconst Polygon = require(\"../Geo/Polygon\").Polygon;\n\n/**\n * SecureObjectFactory class.\n */\nclass SecureObjectFactory {\n    static uuid(id, type) {\n        return new ItemUUID(\n            id,\n            type\n        );\n    };\n\n    static coordinate(lat, lon) {\n        return new Coordinate(\n            lat,\n            lon\n        )\n    }\n\n    static coordinateAndDistance(\n        coordinate,\n        distance\n    ) {\n        return new CoordinateAndDistance(\n            coordinate,\n            distance\n        )\n    }\n\n    static square(\n        topLeftCoordinate,\n        bottomRightCoordinate\n    ) {\n        return new Square(\n            topLeftCoordinate,\n            bottomRightCoordinate\n        )\n    }\n\n    static polygon(...coordinates) {\n        return new Polygon(...coordinates);\n    }\n}\n\nmodule.exports.SecureObjectFactory = SecureObjectFactory;\n\n\n// WEBPACK FOOTER //\n// ./src/Factory/SecureObjectFactory.js","const AbstractLocationRange = require(\"./AbstractLocationRange\").AbstractLocationRange;\nconst Coordinate = require(\"../Query/Coordinate\").Coordinate;\nconst TypeChecker = require(\"../TypeChecker\").TypeChecker;\n\nclass CoordinateAndDistance extends AbstractLocationRange {\n    constructor(\n        coordinate,\n        distance\n    ) {\n        super();\n\n        TypeChecker.isObjectTypeOf(coordinate, Coordinate);\n        TypeChecker.isString(distance);\n\n        this.coordinate = coordinate;\n        this.distance = distance;\n\n        return this;\n    }\n\n    toFilterObject() {\n        return {\n            type: this.constructor.name,\n            data: {\n                coordinate: this.coordinate,\n                distance: this.distance\n            }\n        }\n    }\n}\n\nmodule.exports.CoordinateAndDistance = CoordinateAndDistance;\n\n\n// WEBPACK FOOTER //\n// ./src/Geo/CoordinateAndDistance.js","const AbstractLocationRange = require(\"./AbstractLocationRange\").AbstractLocationRange;\nconst Coordinate = require(\"../Query/Coordinate\").Coordinate;\nconst TypeChecker = require(\"../TypeChecker\").TypeChecker;\n\nclass Square extends AbstractLocationRange {\n    constructor(\n        topLeftCoordinate,\n        bottomRightCoordinate\n    ) {\n        TypeChecker.isObjectTypeOf(topLeftCoordinate, Coordinate);\n        TypeChecker.isObjectTypeOf(bottomRightCoordinate, Coordinate);\n\n        super();\n\n        this.topLeftCoordinate = topLeftCoordinate;\n        this.bottomRightCoordinate = bottomRightCoordinate;\n\n        return this;\n    }\n\n    toFilterObject() {\n        return {\n            type: this.constructor.name,\n            data: {\n                0: this.topLeftCoordinate,\n                1: this.bottomRightCoordinate\n            }\n        }\n    }\n}\n\nmodule.exports.Square = Square;\n\n\n// WEBPACK FOOTER //\n// ./src/Geo/Square.js","const AbstractLocationRange = require(\"./AbstractLocationRange\").AbstractLocationRange;\nconst Coordinate = require(\"../Query/Coordinate\").Coordinate;\nconst TypeChecker = require(\"../TypeChecker\").TypeChecker;\n\nclass Polygon extends AbstractLocationRange {\n    constructor(...coordinates) {\n        super();\n\n        if (coordinates.length < 3) {\n            throw new Error(`A polygon needs more than two coordinates.`);\n        }\n\n        this.coordinates = coordinates.map(coordinate => {\n            TypeChecker.isObjectTypeOf(coordinate, Coordinate);\n\n            return coordinate;\n        });\n\n        return this;\n    }\n\n    toFilterObject() {\n        return {\n            type: this.constructor.name,\n            data: this.coordinates\n        }\n    }\n}\n\nmodule.exports.Polygon = Polygon;\n\n\n// WEBPACK FOOTER //\n// ./src/Geo/Polygon.js","const {\n    QUERY_DEFAULT_PAGE,\n    QUERY_DEFAULT_SIZE,\n    QUERY_INFINITE_SIZE\n} = require(\"../Query/Query\");\nconst Query = require(\"../Query/Query\").Query;\n\nconst {\n    FILTER_AT_LEAST_ONE,\n    FILTER_TYPE_FIELD\n} = require(\"../Query/Filter\");\nconst Filter = require(\"../Query/Filter\").Filter;\n\n\n/**\n * QueryFactory class\n */\nclass QueryFactory {\n    static create(\n        q,\n        page = QUERY_DEFAULT_PAGE,\n        size = QUERY_DEFAULT_SIZE\n    ) {\n        return new Query({\n            q,\n            from: (page - 1) * size,\n            page,\n            size\n        });\n    }\n\n    static createMatchAll() {\n        return new Query({\n            q: '',\n            page: QUERY_DEFAULT_PAGE,\n            size: QUERY_INFINITE_SIZE\n        });\n    }\n\n    static createLocated(\n        coordinate,\n        queryText,\n        page = QUERY_DEFAULT_PAGE,\n        size = QUERY_DEFAULT_SIZE\n    ) {\n        return new Query({\n            coordinate,\n            page,\n            size,\n            q: queryText\n        });\n    }\n\n    static createByUUID(uuid) {\n        return this.createByUUIDs(uuid);\n    }\n\n    static createByUUIDs(...uuids) {\n        let ids = uuids.map(uuid => uuid.composedUUID());\n        let query = new Query({\n            q: '',\n            page: QUERY_DEFAULT_PAGE,\n            size: QUERY_INFINITE_SIZE\n        });\n\n        query\n            .disableAggregations()\n            .disableSuggestions();\n\n        query.filters = {\n            ...query.filters,\n            ['_id']: new Filter(\n                '_id',\n                ids.filter(\n                    (item, pos) => ids.indexOf(item) === pos\n                ),\n                FILTER_AT_LEAST_ONE,\n                FILTER_TYPE_FIELD\n            )\n        };\n\n        return query;\n    }\n}\n\nmodule.exports.QueryFactory = QueryFactory;\n\n\n// WEBPACK FOOTER //\n// ./src/Factory/QueryFactory.js","/**\n * User class\n */\nclass User {\n    constructor(id) {\n        this.id = id;\n    }\n}\n\nmodule.exports.User = User;\n\n\n// WEBPACK FOOTER //\n// ./src/Query/User.js","/**\n export * Sort by constants\n */\n\nconst SORT_BY_SCORE = {\n    '_score': {\n        'order': 'asc'\n    }\n};\nconst SORT_BY_RANDOM = {\n    'random': {\n        'order': 'asc'\n    }\n};\nconst SORT_BY_ID_ASC = {\n    'uuid.id': {\n        'order': 'asc'\n    }\n};\nconst SORT_BY_ID_DESC = {\n    'uuid.id': {\n        'order': 'desc'\n    }\n};\nconst SORT_BY_TYPE_ASC = {\n    'uuid.type': {\n        'order': 'asc'\n    }\n};\nconst SORT_BY_TYPE_DESC = {\n    'uuid.type': {\n        'order': 'desc'\n    }\n};\nconst SORT_BY_LOCATION_KM_ASC = {\n    '_geo_distance': {\n        'order': 'asc',\n        'unit': 'km'\n    }\n};\nconst SORT_BY_LOCATION_MI_ASC = {\n    '_geo_distance': {\n        'order': 'asc',\n        'unit': 'mi'\n    }\n};\n\nmodule.exports = {\n    SORT_BY_SCORE,\n    SORT_BY_RANDOM,\n    SORT_BY_ID_ASC,\n    SORT_BY_ID_DESC,\n    SORT_BY_TYPE_ASC,\n    SORT_BY_TYPE_DESC,\n    SORT_BY_LOCATION_KM_ASC,\n    SORT_BY_LOCATION_MI_ASC\n};\n\n\n// WEBPACK FOOTER //\n// ./src/Query/SortBy.js"],"sourceRoot":""}